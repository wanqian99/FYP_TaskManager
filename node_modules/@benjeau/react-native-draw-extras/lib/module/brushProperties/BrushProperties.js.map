{"version":3,"sources":["BrushProperties.tsx"],"names":["React","forwardRef","useImperativeHandle","useMemo","Animated","StyleSheet","View","Slider","DEFAULT_COLORS","DEFAULT_OPACITY","DEFAULT_OPACITY_STEP","DEFAULT_SLIDER_COLOR","DEFAULT_THICKNESS","DEFAULT_THICKNESS_MAX","DEFAULT_THICKNESS_MIN","DEFAULT_THICKNESS_STEP","SLIDERS_HEIGHT","ColorPicker","colorButtonSize","BrushProperties","thickness","opacity","onThicknessChange","onOpacityChange","opacityStep","thicknessMin","thicknessMax","thicknessStep","sliderColor","color","onColorChange","colors","style","ref","height","length","styles","sliderContainer","create","marginVertical"],"mappings":"AAAA,OAAOA,KAAP,IAAgBC,UAAhB,EAA4BC,mBAA5B,EAAiDC,OAAjD,QAAgE,OAAhE;AACA,SAASC,QAAT,EAA8BC,UAA9B,EAA0CC,IAA1C,QAAiE,cAAjE;AACA,OAAOC,MAAP,MAAmB,gCAAnB;AAEA,SACEC,cADF,EAEEC,eAFF,EAGEC,oBAHF,EAIEC,oBAJF,EAKEC,iBALF,EAMEC,qBANF,EAOEC,qBAPF,EAQEC,sBARF,EASEC,cATF,QAUO,cAVP;AAWA,OAAOC,WAAP,MAA8C,2BAA9C;AACA,SAASC,eAAT,QAAgC,2BAAhC;;AAmEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAMC,eAAe,gBAAGlB,UAAU,CAChC,CACE;AACEmB,EAAAA,SAAS,GAAGR,iBADd;AAEES,EAAAA,OAAO,GAAGZ,eAFZ;AAGEa,EAAAA,iBAHF;AAIEC,EAAAA,eAJF;AAKEC,EAAAA,WAAW,GAAGd,oBALhB;AAMEe,EAAAA,YAAY,GAAGX,qBANjB;AAOEY,EAAAA,YAAY,GAAGb,qBAPjB;AAQEc,EAAAA,aAAa,GAAGZ,sBARlB;AASEa,EAAAA,WAAW,GAAGjB,oBAThB;AAUEkB,EAAAA,KAVF;AAWEC,EAAAA,aAXF;AAYEC,EAAAA,MAAM,GAAGvB,cAZX;AAaEwB,EAAAA;AAbF,CADF,EAgBEC,GAhBF,KAiBK;AACH,QAAMC,MAAM,GAAG/B,OAAO,CACpB,MACE,CAAC4B,MAAM,CAACI,MAAP,GAAgB,CAAjB,IAAsB,CAAtB,GACA,CAACJ,MAAM,CAAC,CAAD,CAAN,CAAUI,MAAV,GAAmBJ,MAAM,CAAC,CAAD,CAAN,CAAUI,MAA9B,IAAwCjB,eADxC,GAEAF,cAJkB,EAKpB,CAACe,MAAD,CALoB,CAAtB;AAQA7B,EAAAA,mBAAmB,CAAC+B,GAAD,EAAM,OAAO;AAC9BC,IAAAA;AAD8B,GAAP,CAAN,CAAnB;AAIA,sBACE,oBAAC,QAAD,CAAU,IAAV;AAAe,IAAA,KAAK,EAAEF;AAAtB,kBACE,oBAAC,WAAD;AACE,IAAA,KAAK,EAAEH,KADT;AAEE,IAAA,MAAM,EAAEE,MAFV;AAGE,IAAA,aAAa,EAAED;AAHjB,IADF,EAMGV,SAAS,IAAIE,iBAAb,IAAkCD,OAAlC,IAA6CE,eAA7C,iBACC,oBAAC,IAAD;AAAM,IAAA,KAAK,EAAEa,MAAM,CAACC;AAApB,KACGjB,SAAS,IAAIE,iBAAb,iBACC,oBAAC,MAAD;AACE,IAAA,YAAY,EAAEG,YADhB;AAEE,IAAA,YAAY,EAAEC,YAFhB;AAGE,IAAA,IAAI,EAAEC,aAHR;AAIE,IAAA,KAAK,EAAEP,SAJT;AAKE,IAAA,aAAa,EAAEE,iBALjB;AAME,IAAA,cAAc,EAAEM,WANlB;AAOE,IAAA,qBAAqB,EAAEA;AAPzB,IAFJ,EAYGP,OAAO,IAAIE,eAAX,iBACC,oBAAC,MAAD;AACE,IAAA,YAAY,EAAE,CADhB;AAEE,IAAA,YAAY,EAAE,CAFhB;AAGE,IAAA,IAAI,EAAEC,WAHR;AAIE,IAAA,KAAK,EAAEH,OAJT;AAKE,IAAA,aAAa,EAAEE,eALjB;AAME,IAAA,cAAc,EAAEK,WANlB;AAOE,IAAA,qBAAqB,EAAEA;AAPzB,IAbJ,CAPJ,CADF;AAmCD,CAlE+B,CAAlC;AAqEA,MAAMQ,MAAM,GAAG/B,UAAU,CAACiC,MAAX,CAAkB;AAC/BD,EAAAA,eAAe,EAAE;AACfE,IAAAA,cAAc,EAAE;AADD;AADc,CAAlB,CAAf;AAMA,eAAepB,eAAf","sourcesContent":["import React, { forwardRef, useImperativeHandle, useMemo } from 'react';\nimport { Animated, StyleProp, StyleSheet, View, ViewStyle } from 'react-native';\nimport Slider from '@react-native-community/slider';\n\nimport {\n  DEFAULT_COLORS,\n  DEFAULT_OPACITY,\n  DEFAULT_OPACITY_STEP,\n  DEFAULT_SLIDER_COLOR,\n  DEFAULT_THICKNESS,\n  DEFAULT_THICKNESS_MAX,\n  DEFAULT_THICKNESS_MIN,\n  DEFAULT_THICKNESS_STEP,\n  SLIDERS_HEIGHT,\n} from '../constants';\nimport ColorPicker, { ColorPickerProps } from './colorPicker/ColorPicker';\nimport { colorButtonSize } from './colorPicker/ColorButton';\n\nexport interface BrushPropertiesProps extends ColorPickerProps {\n  /**\n   * Thickness of the brush strokes\n   * @default DEFAULT_THICKNESS\n   */\n  thickness?: number;\n\n  /**\n   * Opacity of the brush strokes\n   * @default DEFAULT_OPACITY\n   */\n  opacity?: number;\n\n  /**\n   * Callback when brush size is changed via the slider\n   * @param newThickness - New brush size\n   */\n  onThicknessChange?: (newThickness: number) => void;\n\n  /**\n   * Callback when brush opacity is changed via the slider\n   * @param newOpacity - New brush opacity\n   */\n  onOpacityChange?: (newOpacity: number) => void;\n\n  /**\n   * Step value of the opacity slider, should be between 0 and 1\n   * @default DEFAULT_OPACITY_STEP\n   */\n  opacityStep?: number;\n\n  /**\n   * Minimum value of the thickness slider\n   * @default DEFAULT_THICKNESS_MIN\n   */\n  thicknessMin?: number;\n\n  /**\n   * Maximum value of the thickness slider\n   * @default DEFAULT_THICKNESS_MAX\n   */\n  thicknessMax?: number;\n\n  /**\n   * Step value of the thickness slider, should be between `props.thicknessMin` and `props.thicknessMax`\n   * @default DEFAULT_THICKNESS_STEP\n   */\n  thicknessStep?: number;\n\n  /**\n   * Slider color\n   * @default DEFAULT_SLIDER_COLOR\n   */\n  sliderColor?: string;\n\n  /**\n   * Style of the container\n   */\n  style?: StyleProp<ViewStyle>;\n}\n\nexport interface BrushPropertiesRef {\n  height: number;\n}\n\n/**\n * Component allowing user to change brush properties, such as the color,\n * thickness, and opacity.\n *\n * If no thickness or opacity is provided, the component will behave like the\n * `ColorPicker` component.\n */\nconst BrushProperties = forwardRef<BrushPropertiesRef, BrushPropertiesProps>(\n  (\n    {\n      thickness = DEFAULT_THICKNESS,\n      opacity = DEFAULT_OPACITY,\n      onThicknessChange,\n      onOpacityChange,\n      opacityStep = DEFAULT_OPACITY_STEP,\n      thicknessMin = DEFAULT_THICKNESS_MIN,\n      thicknessMax = DEFAULT_THICKNESS_MAX,\n      thicknessStep = DEFAULT_THICKNESS_STEP,\n      sliderColor = DEFAULT_SLIDER_COLOR,\n      color,\n      onColorChange,\n      colors = DEFAULT_COLORS,\n      style,\n    },\n    ref\n  ) => {\n    const height = useMemo(\n      () =>\n        (colors.length - 1) * 3 +\n        (colors[0].length + colors[1].length) * colorButtonSize +\n        SLIDERS_HEIGHT,\n      [colors]\n    );\n\n    useImperativeHandle(ref, () => ({\n      height,\n    }));\n\n    return (\n      <Animated.View style={style}>\n        <ColorPicker\n          color={color}\n          colors={colors}\n          onColorChange={onColorChange}\n        />\n        {thickness && onThicknessChange && opacity && onOpacityChange && (\n          <View style={styles.sliderContainer}>\n            {thickness && onThicknessChange && (\n              <Slider\n                minimumValue={thicknessMin}\n                maximumValue={thicknessMax}\n                step={thicknessStep}\n                value={thickness}\n                onValueChange={onThicknessChange}\n                thumbTintColor={sliderColor}\n                minimumTrackTintColor={sliderColor}\n              />\n            )}\n            {opacity && onOpacityChange && (\n              <Slider\n                minimumValue={0}\n                maximumValue={1}\n                step={opacityStep}\n                value={opacity}\n                onValueChange={onOpacityChange}\n                thumbTintColor={sliderColor}\n                minimumTrackTintColor={sliderColor}\n              />\n            )}\n          </View>\n        )}\n      </Animated.View>\n    );\n  }\n);\n\nconst styles = StyleSheet.create({\n  sliderContainer: {\n    marginVertical: 10,\n  },\n});\n\nexport default BrushProperties;\n"]}