{"version":3,"file":"host-component-names.js","names":["userConfigErrorMessage","getHostComponentNames","hostComponentNames","getConfig","detectHostComponentNames","configureInternal","configureHostComponentNamesIfNeeded","configHostComponentNames","renderer","TestRenderer","create","getByTestId","getQueriesForElement","root","textHostName","type","textInputHostName","Error","text","textInput","error","errorMessage","message"],"sources":["../../src/helpers/host-component-names.tsx"],"sourcesContent":["import React from 'react';\nimport { Text, TextInput, View } from 'react-native';\nimport TestRenderer from 'react-test-renderer';\nimport { configureInternal, getConfig, HostComponentNames } from '../config';\nimport { getQueriesForElement } from '../within';\n\nconst userConfigErrorMessage = `There seems to be an issue with your configuration that prevents React Native Testing Library from working correctly.\nPlease check if you are using compatible versions of React Native and React Native Testing Library.`;\n\nexport function getHostComponentNames(): HostComponentNames {\n  let hostComponentNames = getConfig().hostComponentNames;\n  if (!hostComponentNames) {\n    hostComponentNames = detectHostComponentNames();\n    configureInternal({ hostComponentNames });\n  }\n\n  return hostComponentNames;\n}\n\nexport function configureHostComponentNamesIfNeeded() {\n  const configHostComponentNames = getConfig().hostComponentNames;\n  if (configHostComponentNames) {\n    return;\n  }\n\n  const hostComponentNames = detectHostComponentNames();\n  configureInternal({ hostComponentNames });\n}\n\nfunction detectHostComponentNames(): HostComponentNames {\n  try {\n    const renderer = TestRenderer.create(\n      <View>\n        <Text testID=\"text\">Hello</Text>\n        <TextInput testID=\"textInput\" />\n      </View>\n    );\n\n    const { getByTestId } = getQueriesForElement(renderer.root);\n    const textHostName = getByTestId('text').type;\n    const textInputHostName = getByTestId('textInput').type;\n\n    // This code path should not happen as getByTestId always returns host elements.\n    if (\n      typeof textHostName !== 'string' ||\n      typeof textInputHostName !== 'string'\n    ) {\n      throw new Error('getByTestId returned non-host component');\n    }\n\n    return {\n      text: textHostName,\n      textInput: textInputHostName,\n    };\n  } catch (error) {\n    const errorMessage =\n      error && typeof error === 'object' && 'message' in error\n        ? error.message\n        : null;\n\n    throw new Error(\n      `Trying to detect host component names triggered the following error:\\n\\n${errorMessage}\\n\\n${userConfigErrorMessage}`\n    );\n  }\n}\n"],"mappings":";;;;;;;AAAA;AACA;AACA;AACA;AACA;AAAiD;AAEjD,MAAMA,sBAAsB,GAAI;AAChC,oGAAoG;AAE7F,SAASC,qBAAqB,GAAuB;EAC1D,IAAIC,kBAAkB,GAAG,IAAAC,iBAAS,GAAE,CAACD,kBAAkB;EACvD,IAAI,CAACA,kBAAkB,EAAE;IACvBA,kBAAkB,GAAGE,wBAAwB,EAAE;IAC/C,IAAAC,yBAAiB,EAAC;MAAEH;IAAmB,CAAC,CAAC;EAC3C;EAEA,OAAOA,kBAAkB;AAC3B;AAEO,SAASI,mCAAmC,GAAG;EACpD,MAAMC,wBAAwB,GAAG,IAAAJ,iBAAS,GAAE,CAACD,kBAAkB;EAC/D,IAAIK,wBAAwB,EAAE;IAC5B;EACF;EAEA,MAAML,kBAAkB,GAAGE,wBAAwB,EAAE;EACrD,IAAAC,yBAAiB,EAAC;IAAEH;EAAmB,CAAC,CAAC;AAC3C;AAEA,SAASE,wBAAwB,GAAuB;EACtD,IAAI;IACF,MAAMI,QAAQ,GAAGC,0BAAY,CAACC,MAAM,eAClC,6BAAC,iBAAI,qBACH,6BAAC,iBAAI;MAAC,MAAM,EAAC;IAAM,GAAC,OAAK,CAAO,eAChC,6BAAC,sBAAS;MAAC,MAAM,EAAC;IAAW,EAAG,CAC3B,CACR;IAED,MAAM;MAAEC;IAAY,CAAC,GAAG,IAAAC,4BAAoB,EAACJ,QAAQ,CAACK,IAAI,CAAC;IAC3D,MAAMC,YAAY,GAAGH,WAAW,CAAC,MAAM,CAAC,CAACI,IAAI;IAC7C,MAAMC,iBAAiB,GAAGL,WAAW,CAAC,WAAW,CAAC,CAACI,IAAI;;IAEvD;IACA,IACE,OAAOD,YAAY,KAAK,QAAQ,IAChC,OAAOE,iBAAiB,KAAK,QAAQ,EACrC;MACA,MAAM,IAAIC,KAAK,CAAC,yCAAyC,CAAC;IAC5D;IAEA,OAAO;MACLC,IAAI,EAAEJ,YAAY;MAClBK,SAAS,EAAEH;IACb,CAAC;EACH,CAAC,CAAC,OAAOI,KAAK,EAAE;IACd,MAAMC,YAAY,GAChBD,KAAK,IAAI,OAAOA,KAAK,KAAK,QAAQ,IAAI,SAAS,IAAIA,KAAK,GACpDA,KAAK,CAACE,OAAO,GACb,IAAI;IAEV,MAAM,IAAIL,KAAK,CACZ,2EAA0EI,YAAa,OAAMrB,sBAAuB,EAAC,CACvH;EACH;AACF"}